학습 내용 기록 - 김시후

학습 일자 | 2025-10-18 (토)

1. 실습 주제

LiDAR 센서를 사용해 차량이 벽과 일정 거리(1m)를 유지하면서 주행하도록 하는 Wall Following을 구현하고, PID 제어기를 적용해 주행을 안정적으로 만드는 실습.

2. 실습 목표

LiDAR 데이터를 이용해 벽과의 거리를 계산하고, 목표 거리(1m)와 실제 거리의 차이를 이용해 오차(error)를 구하기.

PID 제어기(P, I, D 항)를 이용해 오차를 줄이면서 부드럽게 벽을 따라 주행하게 만들기.

Kp, Ki, Kd 값을 바꿔보며 각각이 주행 안정성에 어떤 영향을 주는지 확인하기.

3. 실습 내용

/scan 토픽으로부터 LiDAR 거리 데이터를 받아 차량 좌측 벽과의 거리를 계산함.

목표 거리(desired_distance = 1.0 m)와 실제 거리(current_distance)의 차이로 오차(error)를 계산.

PID 제어식을 사용해 조향각(steering_angle)을 계산하고, /drive 토픽으로 속도와 조향값을 차량에 전달함.

PID 각 항의 역할

Kp (비례항): 오차에 비례해서 즉각적으로 반응. 너무 크면 진동 발생.

Ki (적분항): 누적된 오차를 보정. 너무 크면 과도한 반응으로 불안정해짐.

Kd (미분항): 오차 변화율을 이용해 진동을 줄이고 부드럽게 만듦.

실험 명령어 예시

ros2 run wall_following_pkg wall_follower_node --ros-args \
  -p mode:=dual -p center_offset:=0.0 \
  -p kp:=0.75 -p ki:=0.001 -p kd:=0.18 \
  -p lookahead:=0.8 -p velocity:=1.0 \
  -p phi_deg:=55.0 -p theta_deg:=8.0 -p max_wall_dist:=8.0

4. 실험 결과

Kp만 크게 했을 때: 벽에 빠르게 반응하지만 진동이 심함.

Ki 추가: 편향된 주행이 줄어들지만 오버슈트(넘침 현상) 발생.

Kd 추가: 전체적으로 주행이 부드러워지고 안정됨.

최종 튜닝 값: Kp = 0.75, Ki = 0.001, Kd = 0.18

5. 학습 소감

이번 실습을 통해 단순히 비례제어(P제어)만으로는 오차를 완전히 줄일 수 없다는 걸 배웠다. 적분항(I)과 미분항(D)이 추가되면 오차를 보정하고 진동을 줄여 훨씬 안정적인 주행이 가능했다. 실제 ROS2 환경에서 센서 입력부터 제어 출력까지 직접 연결해보면서, 자율주행 제어기의 기본 원리를 쉽게 이해할 수 있었다.
